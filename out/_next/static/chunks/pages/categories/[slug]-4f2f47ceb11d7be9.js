(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[591],{813:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/categories/[slug]",function(){return a(1428)}])},1622:function(e,t,a){"use strict";let r;var n=a(5893),c=a(1664),i=a.n(c),s=a(5675),o=a.n(s),l=a(1163),u=a(3935),d=a(7294),v=a(97),_=a(8290),f=a(1286),m=a(5099),p=a(2637),h=a.n(p);let getCardObserver=()=>(r||(r=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("is-inview"),r&&r.unobserve(e.target))})},{threshold:.15})),r);t.Z=e=>{var t,a;let{product:r,className:c=""}=e,s=(0,l.useRouter)(),{items:p,addToCart:g,removeFromCart:x}=(0,v.j)(),{toggleFavorite:b,isFavorite:C}=(0,_.r)(),{isAuthenticated:j}=(0,f.a)(),{toast:w}=(0,m.pm)(),y=(0,d.useRef)(null),P=(0,d.useRef)(null),[N,R]=(0,d.useState)(!1),[k,T]=(0,d.useState)(null),[B,E]=(0,d.useState)(!1),[A,F]=(0,d.useState)(!1),O=(0,d.useRef)(null),S=(0,d.useRef)(null),z=(0,d.useRef)(null),D=(0,d.useRef)(null),L=(0,d.useRef)(null),X=(0,d.useRef)(!0),[W,Y]=(0,d.useState)(!1),q=j&&C(r.id),U=p.some(e=>e.id===r.id);(0,d.useEffect)(()=>{let e=y.current;if(!e)return;let t=getCardObserver();if(t)return t.observe(e),()=>{t.unobserve(e)}},[]),(0,d.useEffect)(()=>(Y(!0),()=>{X.current=!1,O.current&&clearTimeout(O.current),S.current&&clearTimeout(S.current),z.current&&(cancelAnimationFrame(z.current),z.current=null),D.current&&clearTimeout(D.current),L.current&&clearTimeout(L.current)}),[]);let triggerButtonAnimation=()=>{O.current&&clearTimeout(O.current),R(!0),O.current=setTimeout(()=>{R(!1)},220)},triggerFlightAnimation=()=>{if(!P.current)return;let e=document.querySelector('[data-av-cart-target="icon"]');if(!e)return;let t=P.current.getBoundingClientRect(),a=e.getBoundingClientRect(),r=window.scrollX||window.pageXOffset||0,n=window.scrollY||window.pageYOffset||0,c=t.left+t.width/2,i=t.top+t.height/2,s=a.left+a.width/2,o=a.top+a.height/2,l={key:Date.now(),left:c+r,top:i+n,deltaX:s-c,deltaY:o-i};S.current&&clearTimeout(S.current),z.current&&(cancelAnimationFrame(z.current),z.current=null),T(null),z.current=window.requestAnimationFrame(()=>{X.current&&(T(l),z.current=null,S.current=setTimeout(()=>{X.current&&T(null)},450))})};return(0,d.useEffect)(()=>{if(!k)return;let handleResize=()=>{X.current&&T(null)};return window.addEventListener("resize",handleResize),()=>{window.removeEventListener("resize",handleResize)}},[k]),(0,n.jsxs)("div",{ref:y,"data-av-card":!0,className:"".concat(h().card," av-card av-card-w av-card-hover ").concat(c).trim(),children:[(0,n.jsxs)("div",{className:"av-card-media ".concat(h().imageWrapper),children:["number"==typeof r.rating?(0,n.jsxs)("span",{className:h().avRatingBadge,"aria-label":"Средняя оценка ".concat(r.rating.toFixed(1)," из 5"),children:[null!==(a=null===(t=r.rating)||void 0===t?void 0:t.toFixed(1))&&void 0!==a?a:"—"," ★"]}):null,(0,n.jsx)(o(),{src:r.image,alt:r.name,fill:!0,sizes:"(max-width: 768px) 50vw, 240px",className:"av-card-img",style:{objectFit:"contain"}}),(0,n.jsx)("button",{type:"button",className:"".concat(h()["av-fav-btn"]," ").concat(q?h()["av-fav-btn-active"]:""," ").concat(B?h()["av-fav-btn-pulse"]:""," ").concat(A?h()["av-fav-btn-shake"]:""),"aria-pressed":q,"aria-label":q?"Убрать из избранного":"Добавить в избранное",onClick:e=>{if(e.preventDefault(),e.stopPropagation(),!j){F(!0),L.current&&clearTimeout(L.current),L.current=setTimeout(()=>{F(!1)},320),w({type:"warning",message:"Войдите в аккаунт, чтобы добавлять в избранное",actionLabel:"Войти",onAction:()=>{s.push("/auth/login?returnTo=/favorites")}});return}let t=b(r.id);D.current&&clearTimeout(D.current),E(!0),D.current=setTimeout(()=>{E(!1)},220),w({type:"success",message:t?"Товар добавлен в избранное":"Товар удалён из избранного"})},children:(0,n.jsx)("svg",{className:h()["av-fav-icon"],viewBox:"0 0 24 24",role:"presentation","aria-hidden":"true",children:(0,n.jsx)("path",{d:"M12 20.7 10.55 19.4C5.4 14.8 2 11.7 2 8A5 5 0 0 1 7 3a4.5 4.5 0 0 1 5 3 4.5 4.5 0 0 1 5-3 5 5 0 0 1 5 5c0 3.7-3.4 6.8-8.55 11.4Z"})})})]}),(0,n.jsxs)("div",{className:"av-card-body ".concat(h().content),children:[(0,n.jsx)("h3",{className:"av-clamp-2",children:r.name}),(0,n.jsx)("p",{className:"".concat(h().description," av-clamp-3"),children:r.description}),(0,n.jsxs)("div",{className:"".concat(h().footer," av-card-footer"),children:[(0,n.jsxs)("span",{className:h().price,children:[r.price.toLocaleString()," ₺"]}),(0,n.jsxs)("div",{className:"".concat(h().actions," av-card-actions"),children:[(0,n.jsx)("button",{type:"button",ref:P,className:"".concat(h().cartButton," ").concat(U?h()["av-in-cart"]:""," ").concat(N?h()["av-cart-button-pulse"]:"").trim(),onClick:e=>{if(e&&(e.preventDefault(),e.stopPropagation()),U){x(r.id),w({type:"success",message:"".concat(r.name," удалён из корзины")});return}g(r,1),triggerButtonAnimation(),triggerFlightAnimation(),w({type:"success",message:"".concat(r.name," добавлен в корзину")})},"aria-label":U?"Удалить ".concat(r.name," из корзины"):"Добавить ".concat(r.name," в корзину"),children:U?"В корзине":"В корзину"}),(0,n.jsx)(i(),{href:"/products/".concat(r.id),className:"".concat(h().more," av-btn-center"),children:"Подробнее"})]})]})]}),W&&k?(0,u.createPortal)((0,n.jsx)("span",{className:"".concat(h()["av-flyer"]," ").concat(h()["av-flyer-active"]),style:{left:"".concat(k.left,"px"),top:"".concat(k.top,"px"),"--av-flyer-x":"".concat(k.deltaX,"px"),"--av-flyer-y":"".concat(k.deltaY,"px")},"aria-hidden":"true"},k.key),document.body):null]})}},1428:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSG:function(){return u}});var r=a(5893),n=a(1664),c=a.n(n),i=a(3207),s=a(1622),o=a(2097),l=a.n(o),u=!0;t.default=e=>{let{category:t,products:a}=e,n=t?"".concat(t.name," — Avenue Professional"):"Категория — Avenue Professional";return(0,r.jsx)(i.Z,{title:n,children:(0,r.jsxs)("section",{className:l().section,children:[(0,r.jsx)("nav",{className:l().breadcrumbs,"aria-label":"Хлебные крошки",children:(0,r.jsxs)("ol",{children:[(0,r.jsx)("li",{children:(0,r.jsx)(c(),{href:"/",children:"Главная"})}),(0,r.jsx)("li",{children:(0,r.jsx)(c(),{href:"/categories",children:"Категории"})}),(0,r.jsx)("li",{"aria-current":"page",children:t?t.name:"Категория"})]})}),(0,r.jsx)("h1",{children:t?t.name:"Категория"}),(null==t?void 0:t.description)?(0,r.jsx)("p",{className:l().description,children:t.description}):null,(0,r.jsx)("div",{className:"av-grid-shell",children:(0,r.jsx)("div",{className:"".concat(l().grid," av-grid-products"),children:a.map(e=>(0,r.jsx)(s.Z,{product:e},e.id))})}),0===a.length?(0,r.jsx)("p",{className:l().empty,children:"В этой категории пока нет товаров. Загляните позже или выберите другую категорию."}):null]})})}},2097:function(e){e.exports={section:"Catalog_section__7C6Jv",breadcrumbs:"Catalog_breadcrumbs__5iq3L",description:"Catalog_description__q6IkU",grid:"Catalog_grid__Zerri",empty:"Catalog_empty__tB7zj"}},2637:function(e){e.exports={card:"ProductCard_card__2hfhB",imageWrapper:"ProductCard_imageWrapper__A_6g4",avRatingBadge:"ProductCard_avRatingBadge__7OvUr","av-fav-btn":"ProductCard_av-fav-btn__nUD0d",content:"ProductCard_content__vyu2e",description:"ProductCard_description__JmjJL",footer:"ProductCard_footer__aGQww",price:"ProductCard_price__s3DmM",actions:"ProductCard_actions__DOKvR",cartButton:"ProductCard_cartButton__1_56F","av-in-cart":"ProductCard_av-in-cart__EzKUF","av-cart-button-pulse":"ProductCard_av-cart-button-pulse__t4qDr",more:"ProductCard_more__c8_H9","av-flyer":"ProductCard_av-flyer__WyhFX","av-flyer-active":"ProductCard_av-flyer-active__w7Ucu","av-flyer-motion":"ProductCard_av-flyer-motion__5hflv","av-fav-btn-active":"ProductCard_av-fav-btn-active__gHpEH","av-fav-icon":"ProductCard_av-fav-icon__xtYdR","av-fav-btn-pulse":"ProductCard_av-fav-btn-pulse__mQYPa","av-fav-pop":"ProductCard_av-fav-pop__jkfWC","av-fav-btn-shake":"ProductCard_av-fav-btn-shake__ltCWx","av-fav-shake":"ProductCard_av-fav-shake__2otdp"}}},function(e){e.O(0,[998,675,207,774,888,179],function(){return e(e.s=813)}),_N_E=e.O()}]);