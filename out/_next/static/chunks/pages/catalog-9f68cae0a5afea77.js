(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[65],{2718:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/catalog",function(){return a(558)}])},1622:function(e,t,a){"use strict";let r;var n=a(5893),c=a(1664),i=a.n(c),o=a(5675),s=a.n(o),u=a(1163),l=a(3935),d=a(7294),v=a(97),_=a(8290),f=a(1286),m=a(5099),p=a(2637),g=a.n(p);let getCardObserver=()=>(r||(r=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("is-inview"),r&&r.unobserve(e.target))})},{threshold:.15})),r);t.Z=e=>{var t,a;let{product:r,className:c=""}=e,o=(0,u.useRouter)(),{items:p,addToCart:h,removeFromCart:b}=(0,v.j)(),{toggleFavorite:x,isFavorite:C}=(0,_.r)(),{isAuthenticated:y}=(0,f.a)(),{toast:w}=(0,m.pm)(),j=(0,d.useRef)(null),P=(0,d.useRef)(null),[N,R]=(0,d.useState)(!1),[k,B]=(0,d.useState)(null),[T,A]=(0,d.useState)(!1),[E,q]=(0,d.useState)(!1),F=(0,d.useRef)(null),z=(0,d.useRef)(null),S=(0,d.useRef)(null),L=(0,d.useRef)(null),O=(0,d.useRef)(null),D=(0,d.useRef)(!0),[X,W]=(0,d.useState)(!1),Y=y&&C(r.id),U=p.some(e=>e.id===r.id);(0,d.useEffect)(()=>{let e=j.current;if(!e)return;let t=getCardObserver();if(t)return t.observe(e),()=>{t.unobserve(e)}},[]),(0,d.useEffect)(()=>(W(!0),()=>{D.current=!1,F.current&&clearTimeout(F.current),z.current&&clearTimeout(z.current),S.current&&(cancelAnimationFrame(S.current),S.current=null),L.current&&clearTimeout(L.current),O.current&&clearTimeout(O.current)}),[]);let triggerButtonAnimation=()=>{F.current&&clearTimeout(F.current),R(!0),F.current=setTimeout(()=>{R(!1)},220)},triggerFlightAnimation=()=>{if(!P.current)return;let e=document.querySelector('[data-av-cart-target="icon"]');if(!e)return;let t=P.current.getBoundingClientRect(),a=e.getBoundingClientRect(),r=window.scrollX||window.pageXOffset||0,n=window.scrollY||window.pageYOffset||0,c=t.left+t.width/2,i=t.top+t.height/2,o=a.left+a.width/2,s=a.top+a.height/2,u={key:Date.now(),left:c+r,top:i+n,deltaX:o-c,deltaY:s-i};z.current&&clearTimeout(z.current),S.current&&(cancelAnimationFrame(S.current),S.current=null),B(null),S.current=window.requestAnimationFrame(()=>{D.current&&(B(u),S.current=null,z.current=setTimeout(()=>{D.current&&B(null)},450))})};return(0,d.useEffect)(()=>{if(!k)return;let handleResize=()=>{D.current&&B(null)};return window.addEventListener("resize",handleResize),()=>{window.removeEventListener("resize",handleResize)}},[k]),(0,n.jsxs)("div",{ref:j,"data-av-card":!0,className:"".concat(g().card," av-card av-card-w av-card-hover ").concat(c).trim(),children:[(0,n.jsxs)("div",{className:"av-card-media ".concat(g().imageWrapper),children:["number"==typeof r.rating?(0,n.jsxs)("span",{className:g().avRatingBadge,"aria-label":"Средняя оценка ".concat(r.rating.toFixed(1)," из 5"),children:[null!==(a=null===(t=r.rating)||void 0===t?void 0:t.toFixed(1))&&void 0!==a?a:"—"," ★"]}):null,(0,n.jsx)(s(),{src:r.image,alt:r.name,fill:!0,sizes:"(max-width: 768px) 50vw, 240px",className:"av-card-img",style:{objectFit:"contain"}}),(0,n.jsx)("button",{type:"button",className:"".concat(g()["av-fav-btn"]," ").concat(Y?g()["av-fav-btn-active"]:""," ").concat(T?g()["av-fav-btn-pulse"]:""," ").concat(E?g()["av-fav-btn-shake"]:""),"aria-pressed":Y,"aria-label":Y?"Убрать из избранного":"Добавить в избранное",onClick:e=>{if(e.preventDefault(),e.stopPropagation(),!y){q(!0),O.current&&clearTimeout(O.current),O.current=setTimeout(()=>{q(!1)},320),w({type:"warning",message:"Войдите в аккаунт, чтобы добавлять в избранное",actionLabel:"Войти",onAction:()=>{o.push("/auth/login?returnTo=/favorites")}});return}let t=x(r.id);L.current&&clearTimeout(L.current),A(!0),L.current=setTimeout(()=>{A(!1)},220),w({type:"success",message:t?"Товар добавлен в избранное":"Товар удалён из избранного"})},children:(0,n.jsx)("svg",{className:g()["av-fav-icon"],viewBox:"0 0 24 24",role:"presentation","aria-hidden":"true",children:(0,n.jsx)("path",{d:"M12 20.7 10.55 19.4C5.4 14.8 2 11.7 2 8A5 5 0 0 1 7 3a4.5 4.5 0 0 1 5 3 4.5 4.5 0 0 1 5-3 5 5 0 0 1 5 5c0 3.7-3.4 6.8-8.55 11.4Z"})})})]}),(0,n.jsxs)("div",{className:"av-card-body ".concat(g().content),children:[(0,n.jsx)("h3",{className:"av-clamp-2",children:r.name}),(0,n.jsx)("p",{className:"".concat(g().description," av-clamp-3"),children:r.description}),(0,n.jsxs)("div",{className:"".concat(g().footer," av-card-footer"),children:[(0,n.jsxs)("span",{className:g().price,children:[r.price.toLocaleString()," ₺"]}),(0,n.jsxs)("div",{className:"".concat(g().actions," av-card-actions"),children:[(0,n.jsx)("button",{type:"button",ref:P,className:"".concat(g().cartButton," ").concat(U?g()["av-in-cart"]:""," ").concat(N?g()["av-cart-button-pulse"]:"").trim(),onClick:e=>{if(e&&(e.preventDefault(),e.stopPropagation()),U){b(r.id),w({type:"success",message:"".concat(r.name," удалён из корзины")});return}h(r,1),triggerButtonAnimation(),triggerFlightAnimation(),w({type:"success",message:"".concat(r.name," добавлен в корзину")})},"aria-label":U?"Удалить ".concat(r.name," из корзины"):"Добавить ".concat(r.name," в корзину"),children:U?"В корзине":"В корзину"}),(0,n.jsx)(i(),{href:"/products/".concat(r.id),className:"".concat(g().more," av-btn-center"),children:"Подробнее"})]})]})]}),X&&k?(0,l.createPortal)((0,n.jsx)("span",{className:"".concat(g()["av-flyer"]," ").concat(g()["av-flyer-active"]),style:{left:"".concat(k.left,"px"),top:"".concat(k.top,"px"),"--av-flyer-x":"".concat(k.deltaX,"px"),"--av-flyer-y":"".concat(k.deltaY,"px")},"aria-hidden":"true"},k.key),document.body):null]})}},558:function(e,t,a){"use strict";a.r(t);var r=a(5893),n=a(7294),c=a(1163),i=a(3207),o=a(1622),s=a(1187),u=a(2097),l=a.n(u);let normalizeString=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.toString().trim().toLowerCase()};t.default=()=>{let e=(0,c.useRouter)(),t=Array.isArray(e.query.query)?e.query.query[0]:e.query.query||"",a=normalizeString(t),u=(0,n.useMemo)(()=>a?s.RB.filter(e=>{let t="".concat(e.name," ").concat(e.description).toLowerCase();return t.includes(a)}):s.RB,[a]);return(0,r.jsx)(i.Z,{title:"Каталог — Avenue Professional",children:(0,r.jsxs)("section",{className:l().section,children:[(0,r.jsx)("h1",{children:"Каталог"}),a?(0,r.jsxs)("p",{className:l().description,children:["Результаты по запросу \xab",t,"\xbb. Найдено ",u.length," товар(ов)."]}):(0,r.jsx)("p",{className:l().description,children:"Изучите весь ассортимент Avenue Professional и подберите идеальный набор для ухода."}),(0,r.jsx)("div",{className:"av-grid-shell",children:(0,r.jsx)("div",{className:"".concat(l().grid," av-grid-products"),children:u.map(e=>(0,r.jsx)(o.Z,{product:e},e.id))})}),0===u.length&&(0,r.jsx)("p",{className:l().empty,children:"По вашему запросу ничего не найдено. Попробуйте изменить критерии."})]})})}},2097:function(e){e.exports={section:"Catalog_section__7C6Jv",breadcrumbs:"Catalog_breadcrumbs__5iq3L",description:"Catalog_description__q6IkU",grid:"Catalog_grid__Zerri",empty:"Catalog_empty__tB7zj"}},2637:function(e){e.exports={card:"ProductCard_card__2hfhB",imageWrapper:"ProductCard_imageWrapper__A_6g4",avRatingBadge:"ProductCard_avRatingBadge__7OvUr","av-fav-btn":"ProductCard_av-fav-btn__nUD0d",content:"ProductCard_content__vyu2e",description:"ProductCard_description__JmjJL",footer:"ProductCard_footer__aGQww",price:"ProductCard_price__s3DmM",actions:"ProductCard_actions__DOKvR",cartButton:"ProductCard_cartButton__1_56F","av-in-cart":"ProductCard_av-in-cart__EzKUF","av-cart-button-pulse":"ProductCard_av-cart-button-pulse__t4qDr",more:"ProductCard_more__c8_H9","av-flyer":"ProductCard_av-flyer__WyhFX","av-flyer-active":"ProductCard_av-flyer-active__w7Ucu","av-flyer-motion":"ProductCard_av-flyer-motion__5hflv","av-fav-btn-active":"ProductCard_av-fav-btn-active__gHpEH","av-fav-icon":"ProductCard_av-fav-icon__xtYdR","av-fav-btn-pulse":"ProductCard_av-fav-btn-pulse__mQYPa","av-fav-pop":"ProductCard_av-fav-pop__jkfWC","av-fav-btn-shake":"ProductCard_av-fav-btn-shake__ltCWx","av-fav-shake":"ProductCard_av-fav-shake__2otdp"}}},function(e){e.O(0,[998,675,207,187,774,888,179],function(){return e(e.s=2718)}),_N_E=e.O()}]);