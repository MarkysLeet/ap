(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[389],{7995:function(a,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/favorites",function(){return t(5337)}])},5337:function(a,e,t){"use strict";t.r(e);var i=t(5893),s=t(7294),v=t(1664),n=t.n(v),r=t(5675),c=t.n(r),o=t(1163),l=t(3207),d=t(8290),f=t(1286),m=t(97),_=t(5099),h=t(850),u=t.n(h),p=t(1187);e.default=()=>{let{favorites:a,toggleFavorite:e}=(0,d.r)(),{isAuthenticated:t}=(0,f.a)(),{addToCart:v}=(0,m.j)(),{toast:r}=(0,_.pm)(),h=(0,o.useRouter)(),[x,g]=(0,s.useState)("new"),j=(0,s.useMemo)(()=>{let e=a.map(a=>{let e=p.RB.find(e=>e.id===a.id);return e?{product:e,addedAt:a.addedAt}:null}).filter(Boolean),t=[...e].sort((a,e)=>"new"===x?e.addedAt-a.addedAt:a.addedAt-e.addedAt);return t},[a,x]),handleAddToCart=a=>{v(a,1),r({type:"success",message:"".concat(a.name," добавлен в корзину")})},handleRemoveFavorite=a=>{let t=e(a.id);t||r({type:"success",message:"".concat(a.name," удалён из избранного")})};return(0,i.jsx)(l.Z,{title:"Избранное — Avenue Professional",children:(0,i.jsxs)("section",{className:u()["av-fav-section"],children:[(0,i.jsxs)("header",{className:u()["av-fav-header"],children:[(0,i.jsx)("h1",{children:"Избранное"}),(0,i.jsx)("p",{children:"Сохраняйте любимые продукты и возвращайтесь к ним, когда будете готовы к покупке."})]}),t?0===j.length?(0,i.jsxs)("div",{className:u()["av-fav-empty"],children:[(0,i.jsx)("p",{children:"Пока здесь пусто. Добавьте товары в избранное, чтобы быстрее находить их позже."}),(0,i.jsx)("button",{type:"button",className:u()["av-fav-cta"],onClick:()=>h.push("/categories"),children:"Перейти в каталог"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:u()["av-fav-toolbar"],children:(0,i.jsxs)("select",{id:"favorites-sort",className:u()["av-fav-sort"],value:x,onChange:a=>g(a.target.value),"aria-label":"Сортировка по дате добавления",children:[(0,i.jsx)("option",{value:"new",children:"Сначала новые"}),(0,i.jsx)("option",{value:"old",children:"Сначала старые"})]})}),(0,i.jsx)("ul",{className:u()["av-fav-list"],children:j.map(a=>{let{product:e}=a;return(0,i.jsx)("li",{className:u()["av-fav-list-item"],children:(0,i.jsxs)("div",{className:u()["av-fav-item"],children:[(0,i.jsxs)("div",{className:u()["av-fav-item-main"],children:[(0,i.jsx)("div",{className:u()["av-fav-item-image"],children:(0,i.jsx)(c(),{src:e.image,alt:e.name,fill:!0,sizes:"(max-width: 768px) 30vw, 120px",style:{objectFit:"contain"}})}),(0,i.jsxs)("div",{className:u()["av-fav-item-info"],children:[(0,i.jsx)(n(),{href:"/products/".concat(e.id),className:u()["av-fav-item-link"],children:e.name}),(0,i.jsx)("p",{className:u()["av-fav-item-description"],children:e.description}),(0,i.jsxs)("span",{className:u()["av-fav-item-price"],children:[e.price.toLocaleString()," ₺"]})]})]}),(0,i.jsxs)("div",{className:u()["av-fav-item-actions"],children:[(0,i.jsx)("button",{type:"button",className:u()["av-fav-action"],onClick:()=>handleAddToCart(e),"aria-label":"Добавить ".concat(e.name," в корзину"),children:"В корзину"}),(0,i.jsx)("button",{type:"button",className:u()["av-fav-action-secondary"],onClick:()=>handleRemoveFavorite(e),"aria-label":"Удалить ".concat(e.name," из избранного"),children:"Удалить"})]})]})},e.id)})})]}):(0,i.jsxs)("div",{className:u()["av-fav-guard"],children:[(0,i.jsx)("p",{children:"Войдите в аккаунт, чтобы просматривать и сохранять избранное."}),(0,i.jsx)("button",{type:"button",className:u()["av-fav-cta"],onClick:()=>h.push("/auth/login?returnTo=/favorites"),children:"Войти"})]})]})})}},850:function(a){a.exports={"av-fav-section":"FavoritesPage_av-fav-section__6Ie_Y","av-fav-header":"FavoritesPage_av-fav-header__xFo4y","av-fav-guard":"FavoritesPage_av-fav-guard__cAu4s","av-fav-empty":"FavoritesPage_av-fav-empty__4X_P1","av-fav-cta":"FavoritesPage_av-fav-cta__rSfl_","av-fav-toolbar":"FavoritesPage_av-fav-toolbar__s2vwx","av-fav-sort":"FavoritesPage_av-fav-sort__5nQvw","av-fav-list":"FavoritesPage_av-fav-list__LtkvD","av-fav-list-item":"FavoritesPage_av-fav-list-item__LkGaT","av-fav-item":"FavoritesPage_av-fav-item__IbJCv","av-fav-item-main":"FavoritesPage_av-fav-item-main__4YJDf","av-fav-item-image":"FavoritesPage_av-fav-item-image__ldi2N","av-fav-item-info":"FavoritesPage_av-fav-item-info__T6JI0","av-fav-item-link":"FavoritesPage_av-fav-item-link__NG8Cr","av-fav-item-description":"FavoritesPage_av-fav-item-description__TVymx","av-fav-item-price":"FavoritesPage_av-fav-item-price__pC1vS","av-fav-item-actions":"FavoritesPage_av-fav-item-actions__qCHOJ","av-fav-action":"FavoritesPage_av-fav-action__qTk1J","av-fav-action-secondary":"FavoritesPage_av-fav-action-secondary__tP51o"}}},function(a){a.O(0,[998,675,207,187,774,888,179],function(){return a(a.s=7995)}),_N_E=a.O()}]);